adp_version: "0.1"
id: "agent.acme.analytics"
name: "Acme Analytics Agent"
description: "Answers analytic questions over Acme telemetry and metrics."
owner: "acme-labs"
tags: ["analytics", "demo", "telemetry"]
runtime:
  framework: "langgraph"
  entrypoint: "acme_agents.main:app"
  language: "python"
  image:
    registry: "ghcr.io"
    repository: "acme/analytics-agent"
    tag: "0.1.0"
    digest: "sha256:exampledigest"
  models:
    - provider: "openai"
      name: "gpt-4o"
      purpose: "generation"
    - provider: "openai"
      name: "text-embedding-3-large"
      purpose: "embedding"
skills:
  - id: "answer"
    name: "Answer telemetry questions"
    description: "Provide concise answers using indexed telemetry metrics."
    tags: ["qa", "metrics"]
    examples:
      - "What is the p95 latency for service api?"
    input_modes: ["text"]
    output_modes: ["text"]
    handler: "acme_agents.skills.answer:run"
interop:
  a2a:
    ref: "./docs/agentcard.json"
tools:
  mcp_servers:
    - id: "metrics-mcp"
      description: "Access metrics over MCP"
      transport: "stdio"
      endpoint: "bin/metrics-mcp"
  http_apis:
    - id: "metrics-api"
      description: "REST API for metrics"
      base_url: "https://api.acme.example"
      auth: "Bearer token via env METRICS_TOKEN"
  sql_functions:
    - id: "analytics.fn_latency"
      description: "Returns latency percentiles"
      connection: "postgresql://telemetry:***@db.acme.local:5432/metrics"
      schema: "analytics"
memory:
  provider: "pinecone"
  endpoint: "https://acme-pinecone.example"
  index: "telemetry"
  namespace: "default"
evaluation:
  suites:
    - id: "regression_basic"
      runner: "custom"
      config_path: "eval/regression_basic.yaml"
      metrics: ["accuracy", "latency"]
      thresholds:
        accuracy: 0.85
    - id: "groundedness_q1"
      runner: "custom"
      config_path: "eval/groundedness_q1.yaml"
      metrics: ["groundedness"]
  promotion_policy:
    require_passing_suites:
      - "regression_basic"
      - "groundedness_q1"
  kpis:
    - id: "accuracy-core"
      name: "Core accuracy"
      description: "Accuracy across core regression suite"
      url: "https://dash.acme.example/kpi/accuracy-core"
      target: 0.9
      unit: "ratio"
governance:
  identity: "spn:acme-agents/analytics"
  allowed_data_scopes: ["metrics.telemetry", "logs.sanitized"]
  forbidden_data_scopes: ["pii.raw"]
  telemetry_endpoint: "https://otel.acme.example/v1"
  guardrail_policy_set: "./policies/guardrails.json"
deployment:
  environments:
    - name: "dev"
      endpoint: "https://dev.agents.acme.example/analytics"
    - name: "prod"
      endpoint: "https://agents.acme.example/analytics"
